/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2016 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/UIComponent","./model/FavoriteModel","./util/Sorter"],function(U,F,S){"use strict";return U.extend("sap.ui.demokit.icex.Component",{metadata:{includes:["css/style.css"]},init:function(){U.prototype.init.apply(this,arguments);var p=jQuery.sap.getModulePath("sap.ui.demokit.icex");var i=new sap.ui.model.json.JSONModel(p+"/model/img.json");this.setModel(i,"img");var f=new F();this.setModel(f,"fav");jQuery.ajax(p+"/model/groups.json",{dataType:"json",success:jQuery.proxy(this.onGroupsLoaded,this)});},createContent:function(){return sap.ui.jsview("app","sap.ui.demokit.icex.view.App");},onGroupsLoaded:function(d){if(d){var t=new Date().getTime();d.groups.sort(S.sortByName);for(var i=0;i<d.groups.length;i++){if(d.groups[i].icons){d.groups[i].count=d.groups[i].icons.length;}if(d.groups[i].icons){d.groups[i].icons.sort(S.sortByName);}}jQuery.sap.require("sap.ui.core.IconPool");var a=sap.ui.core.IconPool.getIconNames();var b=[];for(var i=0;i<a.length;i++){b[i]={name:a[i]};}b.sort(S.sortByName);d.groups.splice(0,0,{name:"all",text:"All",icons:b,count:b.length});var g=new sap.ui.model.json.JSONModel(d);g.setSizeLimit(1000000);this.setModel(g);jQuery.sap.log.info("Component.js: Sorted all those groups and icons in "+(new Date().getTime()-t)+" ms");}}});});
